!function(l,a){setTimeout(function(){l("tr").removeClass("yith-ywar-new-element")},1e4),l(".postbox-header h2").removeClass("hndle").removeClass("ui-sortable-handle"),l(".postbox-header .handle-actions").html("");var e={instance:null,wrapper:null,init:function(n){var t;e.wrapper=n,e.instance||(t=[new wp.media.controller.Library({library:wp.media.query({type:["image","video"]}),multiple:!1,priority:20,filterable:"uploaded"})],e.instance=wp.media.frames.downloadable_file=wp.media({library:{type:""},multiple:!1,states:t}),e.instance.on("select",function(){var t=e.instance.state().get("selection").first().toJSON();a.adminAjax({attachment_id:t.id,request:"get_attachment_image"},{block:n}).done(function(t){var e,a,i;t.success&&(a=(e=n.find(".attachment-values")).val().split(","),(i=t.data.id)&&-1===l.inArray(i,a)&&(n.find(".attachments-list").removeClass("empty").append(t.data.html),a.push(i),l(document).trigger("yith-plugin-fw-tips-init")),e.val(a.join(",")))})}))},open:function(t){e.init(t),e.instance.open()},destroy:function(){e.instance=null}};l(document).on("click",".yith-ywar-show-more .show-more, .yith-ywar-show-more .hide-more",function(t){t.stopPropagation();var t=l(this).closest(".yith-ywar-show-more"),e=t.find(".short-text"),a=t.find(".long-text");t.toggleClass("yith-ywar-show-more--open"),a.length&&(t.is(".yith-ywar-show-more--open")?(a.show(),e.hide()):(a.hide(),e.show()))}).on("click",".yith-ywar-change-review-status",function(){var t=l(this).closest("tr").find(".column-status"),e=l(this).data("id");a.adminAjax({id:e,set_status:l(this).data("action"),request:"change_review_status"},{block:t}).done(function(t){t.success&&location.reload()})}).on("click",".yith-ywar-rating-wrapper .stars span",function(){var t=l(this),e=l(this).closest(".yith-ywar-rating-wrapper").find(".rating-value"),a=l(this).closest(".stars");e.val(t.data("value")),t.siblings("span").removeClass("active"),t.addClass("active"),a.addClass("selected")}).on("yith_ywar_post_validation",function(t,e){for(var a=JSON.parse(l("#validate_fields").val()),i=a.length,n=[],s=0;s<i;s++){var o=l(a[s]);""!==o.val()&&null!==o.val()||(n.push(o),e.is_valid=!1),e.failed=n}}).on("click",".yith-ywar-attachments .new-attachment",function(){var t=l(this).closest(".yith-ywar-attachments");e.open(t)}).on("click",".yith-ywar-attachments .delete-button",function(){var e=l(this).data("item_id"),t=l(this).closest(".yith-ywar-attachments"),a=t.find(".attachment-values"),i=a.val().split(","),n=[];e&&l.inArray(e,i)&&(t.find(".attachment-"+e).remove(),n=i.filter(function(t){return parseInt(t)!==parseInt(e)})),a.val(n.join(",")),""===a.val()&&t.find(".attachments-list").addClass("empty")}).on("click",".unlock-edit-fields",function(){var t=l(this).closest(".editable-fields-wrapper");t.hasClass("locked")?(t.removeClass("locked"),t.find("input").prop("readonly",!1),t.find("select").prop("disabled",!1),t.find(".yith-plugin-fw__panel__option--html").hide(),t.find(".yith-plugin-fw__panel__option--ajax-customers").show()):(t.addClass("locked"),t.find("input").prop("readonly",!0),t.find("select").prop("disabled",!1),t.find(".yith-plugin-fw__panel__option--html").show(),t.find(".yith-plugin-fw__panel__option--ajax-customers").hide())}).on("input change",".yith-plugin-fw-media input",function(){""!==l(this).val()?l(this).closest(".yith-plugin-fw-media").removeClass("empty"):l(this).closest(".yith-plugin-fw-media").addClass("empty")}).on("change",".reviewed-product",function(){var t=l("#yith-ywar-review-options");a.adminAjax({product_id:l(this).val(),request:"get_product_rating"},{block:t}).done(function(t){var e;t.success&&((e=l(".yith-plugin-fw__panel__option--"+t.data.search)).removeClass("yith-plugin-fw__panel__option--"+t.data.search).addClass("yith-plugin-fw__panel__option--"+t.data.replace),e.find(".yith-plugin-fw__panel__option__content").html(t.data.html),l("#validate_fields").val(t.data.validate_fields))})}).on("change","select#rating",function(){l("#post-query-submit").trigger("click")}).on("change","select#review_user_id",function(){var t=l(this).val();a.adminAjax({user_id:t,request:"get_user_data"}).done(function(t){t.success&&(t.data.guest?(l(".user-info").html(t.data.guest),l("#review_author").val(""),l("#review_author_email").val("")):(l("#review_author").val(t.data.user_name),l("#review_author_email").val(t.data.user_email),l(".user-info").html(t.data.user_info)))})})}(jQuery,window.ywar);