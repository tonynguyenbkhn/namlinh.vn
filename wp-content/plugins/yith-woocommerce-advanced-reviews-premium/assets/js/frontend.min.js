!function(d,p){const c=["image/jpeg","image/gif","image/png","image/webp"],h=["video/mp4","video/ogg","video/webm","video/x-m4v","video/x-flv"];var e=!1,u={form:"",files:[],type_count:{image:0,video:0}},r=function(t,a=null){var e=0;-1!==window.location.hash.indexOf("#review-")&&(d("body").find("li.reviews_tab a").trigger("click"),e=window.location.hash.replace("#review-","")),p.ajax({review_id:e,product_id:t.element.data("product-id"),box_id:t.element.data("review-box"),request:"load_reviews",page:t.args.page,rating:t.args.rating,sorting:t.args.sorting,helpful:t.args.helpful,popup:t.popup?"yes":"no"},{block:t.element}).done(function(e){a&&a(e,t)})},l=function(e,t,a){var i=!1;return d("*").removeClass("has-error"),"undefined"!=typeof t.rating_field&&(1<t.rating_field.length?t.rating_field.each(function(){0===parseInt(d(this).val())&&(d(this).parent().parent().addClass("has-error").attr("data-message",ywar_frontend.messages.required_rating),d(this).parent().prev().addClass("has-error"),d("html, body").animate({scrollTop:d(this).parent().parent().offset().top-ywar_frontend.scroll_offset},200),i=!0)}):0===parseInt(t.rating_field.val())&&(n(t.rating_field,"required_rating",i),i=!0)),0===t.user_id&&"insert"===a&&(""===t.user_name.val()&&(n(t.user_name,"required_field",i),i=!0),""===t.user_email.val()&&(n(t.user_email,"required_field",i),i=!0),new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t.user_email.val())||(n(t.user_email,"mail_wrong",i),i=!0)),""===t.content.val()&&(n(t.content,"required_field",i),i=!0),!ywar_frontend.use_recaptcha||"v2"!==ywar_frontend.recaptcha_version||"off"!==t.recaptcha_response&&""!==t.recaptcha_response||(n(t.recaptcha_wrapper,"required_captcha",i),i=!0),i},n=function(e,t,a){e.parent().addClass("has-error").attr("data-message",ywar_frontend.messages[t]),"required_rating"===t&&e.parent().prev().addClass("has-error"),a||d("html, body").animate({scrollTop:e.parent().offset().top-ywar_frontend.scroll_offset},200)},a=function(i,e){var t=new p.Swiper(".thumbs-gallery-"+e,{spaceBetween:10,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0});new p.Swiper(".swiper-gallery-"+e,{on:{init:function(e){var t=d(e.slides[e.activeIndex]),a=t.data("review-id"),a=d("#gallery-review-"+a);i===e.activeIndex&&0<t.find(".wp-video-shortcode").length&&t.find(".wp-video-shortcode").get(0).play(),d(".review-data").addClass("inactive-review"),a.removeClass("inactive-review")},activeIndexChange:function(e){var e=d(e.slides[e.activeIndex]),t=e.data("review-id"),t=d("#gallery-review-"+t);0<e.find(".wp-video-shortcode").length?e.find(".wp-video-shortcode").get(0).play():d(".wp-video-shortcode").each(function(){var e=d(this).get(0);e.pause(),e.currentTime=0}),d(".review-data").addClass("inactive-review"),t.removeClass("inactive-review")}},spaceBetween:0,autoHeight:!1,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-disabled",lockClass:"swiper-button-lock"},thumbs:{swiper:t}}).slideTo(i)},i=function(l){var e="#"+l.element.attr("id");d(document).on("click",e+" .action-buttons",function(){var t,a,i,n,r,e,s,o=d(this);switch(o.data("action")){case"like":s=d(".review-"+(e=o).data("review-id")),p.ajax({review_id:e.data("review-id"),request:"like_review",user_id:e.data("user-id")},{block:e}).done(function(e){e.data.selected?s.find(".helpful-button").addClass("selected"):s.find(".helpful-button").removeClass("selected"),s.find(".helpful-count").html(e.data.message)});break;case"report":r=d(".review-"+(n=o).data("review-id")),p.ajax({request:"report_review",review_id:n.data("review-id"),user_id:n.data("user-id")},{block:n}).done(function(e){var t=n.closest(".review-actions");t.find(".reported-message").remove(),e.data.selected?r.find(".report-button").addClass("selected"):r.find(".report-button").removeClass("selected"),e.data.message&&t.append('<span class="reported-message">'+e.data.message+"</span>")});break;case"delete":!function(e){var t=d(".yith-ywar-single-review.review-"+e.data("review-id")),a="default";switch(!0){case t.hasClass("in-shortcode"):a="shortcode";break;case t.hasClass("in-popup"):a="popup"}p.ajax({review_id:e.data("review-id"),request:"delete_review",button_context:a},{block:e}).done(function(e){e.data.message&&t.after(e.data.message).remove()})}(o);break;default:t=l,a=(e=o).data("review-id"),e=e.data("reply-to"),i=t.element.find("#review-"+a),p.ajax({review_id:a,in_reply_of:e,box_id:t.element.data("review-box"),request:"reply_review"},{block:i}).done(function(e){e.data&&(t.element.find(".yith-ywar-edit-forms:not(.new-review)").remove(),0===t.element.find(".replies-review-"+a).length&&i.after('<div class="yith-ywar-replies-wrapper replies-review-'+a+'"></div>'),t.element.find(".replies-review-"+a).append(e.data),d("html, body").animate({scrollTop:t.element.find("#yith-ywar-new-reply-"+a).offset().top-ywar_frontend.scroll_offset},200),ywar_frontend.use_recaptcha)&&(e=d("#yith-ywar-new-reply-"+a).find(".g-recaptcha"),"undefined"!=typeof grecaptcha)&&0<e.length&&(p.captcha_edit=grecaptcha.render("yith-ywar-recaptcha-new-reply-"+a,{sitekey:e.data("sitekey")}))})}}).on("click",e+" .edit-button",function(){var t,a,i,n;t=l,a=d(this).data("review-id"),i=d(this).data("type"),n=t.element.find("#review-"+a),p.ajax({review_id:a,box_id:t.element.data("review-box"),request:"edit_review"},{block:n}).done(function(e){e.data&&(t.element.find(".yith-ywar-edit-forms:not(.new-review)").remove(),n.append(e.data),ywar_frontend.use_recaptcha)&&(e=d("#yith-ywar-edit-"+i+"-"+a).find(".g-recaptcha"),"undefined"!=typeof grecaptcha)&&0<e.length&&(p.captcha_edit=grecaptcha.render("yith-ywar-recaptcha-edit-"+i+"-"+a,{sitekey:e.data("sitekey")}))})}).on("click",e+" .form-review-rating .stars span",function(){var e=d(this),t=d(this).closest(".rating-wrapper").find(".rating-value"),a=d(this).closest(".stars");t.val(e.data("value")),e.siblings("span").removeClass("active"),e.addClass("active"),a.addClass("selected")}).on("click",e+" .submit-button",function(){var t=l,a=d(this).data("review-id"),i=d(this).data("reply-to");switch(d(this).data("type")){case"edit-reply":ywar_frontend.use_recaptcha&&"v3"===ywar_frontend.recaptcha_version?grecaptcha.ready(function(){grecaptcha.execute(ywar_frontend.recaptcha_sitekey,{action:"submit"}).then(function(e){f(t,a,e)})}):f(t,a,"off");break;case"edit-review":ywar_frontend.use_recaptcha&&"v3"===ywar_frontend.recaptcha_version?grecaptcha.ready(function(){grecaptcha.execute(ywar_frontend.recaptcha_sitekey,{action:"submit"}).then(function(e){o(t,a,e)})}):o(t,a,"off");break;case"create-reply":ywar_frontend.use_recaptcha&&"v3"===ywar_frontend.recaptcha_version?grecaptcha.ready(function(){grecaptcha.execute(ywar_frontend.recaptcha_sitekey,{action:"submit"}).then(function(e){w(t,a,i,e)})}):w(t,a,i,"off");break;default:ywar_frontend.use_recaptcha&&"v3"===ywar_frontend.recaptcha_version?grecaptcha.ready(function(){grecaptcha.execute(ywar_frontend.recaptcha_sitekey,{action:"submit"}).then(function(e){s(t,e)})}):s(t,"off")}}).on("dragover",e+" .yith-ywar-attachments",function(){d(this).closest(".yith-ywar-attachments").addClass("yith-ywar-is-dragging")}).on("dragleave",e+" .yith-ywar-attachments",function(){d(this).closest(".yith-ywar-attachments").removeClass("yith-ywar-is-dragging")}).on("change",e+" .yith-ywar-attachments .attachment-field",function(){var e=d(this).closest(".yith-ywar-attachments"),r=e.find(".attachments-list"),s=!!this.files.length&&this.files,t=d(this).closest(".yith-ywar-edit-forms").attr("id");if(e.removeClass("yith-ywar-is-dragging"),e.find(".messages").html(""),s){var a=s.length,o={image:[],video:[]},l={image:[],video:[]},i=[];u.form!==t&&_(),u.type_count.image=r.find(".attachment-image").length,u.type_count.video=r.find(".attachment-video").length,u.form=t;for(let n=0;n<a;n++){let i=function(e){if(c.includes(e))return"image";else if(h.includes(e))return"video";return false}(s[n].type),e=!0,t=u.type_count[i]<ywar_frontend.file_upload.allowed_quantity[i],a=s[n].size<1024*ywar_frontend.file_upload.allowed_size[i]*1024;if(t?a||(e=!1,l[i].push(s[n].name)):(e=!1,o[i].push(s[n].name)),e){let e=new FileReader,a=u.files.push(s[n])-1;u.type_count[i]+=1,e.onload=function(e){var t=d('<div class="attachment temp-attachment attachment-'+i+'" data-item-id="'+a+'"></div>'),e="video"===i?ywar_frontend.file_upload.video_placeholder:e.target.result,e=d('<img width="80" height="80" src="'+e+'" class="attachment-80x80 size-80x80" decoding="async" loading="lazy" />');t.append(e),r.append(t)},e.readAsDataURL(u.files[a]),r.removeClass("empty")}}0<o.image.length&&i.push(ywar_frontend.messages.too_many_images+o.image.join(", ")),0<o.video.length&&i.push(ywar_frontend.messages.too_many_videos+o.video.join(", ")),0<l.image.length&&i.push(ywar_frontend.messages.image_too_big+l.image.join(", ")),0<l.video.length&&i.push(ywar_frontend.messages.video_too_big+l.video.join(", ")),0<i.length&&e.find(".messages").html(i.join("<br />"))}}).on("click",e+" .yith-ywar-attachments .attachment",function(){var e,t,a,i=d(this).data("item-id"),n=d(this).closest(".yith-ywar-attachments");d(this).hasClass("temp-attachment")?(u.files.splice(i,1),d(this).remove()):(t=(e=n.find('input[name="yith-ywar-attachments"]')).val().split(","),a=[],i&&d.inArray(i,t)&&(d(this).remove(),a=t.filter(function(e){return parseInt(e)!==parseInt(i)})),e.val(a.join(","))),0===n.find(".attachments-list").children().length&&n.find(".attachments-list").addClass("empty")}).on("click",e+" .undo-delete-review",function(){var e=d(this).parent().parent(),t=e.data("review-id"),a=e.data("context");p.ajax({review_id:t,button_context:a,request:"restore_review"},{block:e}).done(function(e){e.data.message&&(d(".yith-ywar-review-form-message.review-"+t).after(e.data.message).remove(),"popup"===a)&&d(".yith-ywar-reviews-list .review-"+t).removeClass("in-popup")})})},s=function(t,e){var a,i=t.element.find(".yith-ywar-edit-forms.new-review"),n={rating_field:i.find('input[name^="yith-ywar-rating"]'),multi_rating:{},rating:0,user_name:i.find('input[name="yith-ywar-user-name"]'),user_email:i.find('input[name="yith-ywar-user-email"]'),title:i.find('input[name="yith-ywar-title"]'),content:i.find('textarea[name="yith-ywar-content"]'),recaptcha_wrapper:i.find(".g-recaptcha"),recaptcha_response:e,user_id:parseInt(ywar_frontend.user_id)};ywar_frontend.use_recaptcha&&"v2"===ywar_frontend.recaptcha_version&&(n.recaptcha_response=grecaptcha.getResponse()),1<n.rating_field.length?(n.rating_field.each(function(){n.multi_rating[d(this).data("index")]=parseInt(d(this).val())}),n.rating=0):n.rating=n.rating_field.val(),l(t,n,"insert")||((a=new FormData).append("request","submit_new_review"),a.append("rating",n.rating),a.append("multi_rating",0===Object.keys(n.multi_rating).length?"":JSON.stringify(n.multi_rating)),a.append("user_name",void 0===n.user_name.val()?"":n.user_name.val()),a.append("user_email",void 0===n.user_email.val()?"":n.user_email.val()),a.append("user_id",n.user_id),a.append("title",void 0===n.title.val()?"":n.title.val()),a.append("content",n.content.val()),a.append("recaptcha_response",n.recaptcha_response),a.append("product_id",t.element.data("product-id")),d.each(u.files,function(e,t){a.append("file-"+e,t)}),p.ajax(a,{block:i,processData:!1,contentType:!1}).done(function(e){!0===e.success?(m(),_(),e.data.message?(i.html(e.data.message),d("html, body").animate({scrollTop:i.offset().top-ywar_frontend.scroll_offset},200)):(window.location="#review-"+e.data.review_id,t.element.find(t.wrapper).html(""),t.args={page:1,rating:"all",sorting:"default",helpful:"no"},r(t,t.reviews_loaded),1<n.rating_field.length?n.rating_field.each(function(){d(this).val("")}):n.rating_field.val(""),i.find(".stars").removeClass("selected"),i.find(".stars").find("span").removeClass("active"),i.find(".temp-attachment").each(function(){d(this).remove()}),i.find(".attachments-list").addClass("empty"),n.user_name.val(""),n.user_email.val(""),n.content.val(""),n.title.val(""),ywar_frontend.use_recaptcha&&"v2"===ywar_frontend.recaptcha_version&&grecaptcha.reset())):l(t,n,"insert")}))},o=function(a,e,t){var i,n=a.element.find("#yith-ywar-edit-review-"+e),r=n.closest(".yith-ywar-single-review").hasClass("in-popup"),s={rating_field:n.find('input[name^="yith-ywar-rating"]'),multi_rating:{},rating:0,title:n.find('input[name="yith-ywar-title"]'),content:n.find('textarea[name="yith-ywar-content"]'),attachments:n.find('input[name="yith-ywar-attachments"]'),recaptcha_wrapper:n.find(".g-recaptcha"),recaptcha_response:t,user_id:parseInt(ywar_frontend.user_id)};ywar_frontend.use_recaptcha&&"v2"===ywar_frontend.recaptcha_version&&(s.recaptcha_response=grecaptcha.getResponse(p.captcha_edit)),1<s.rating_field.length?(s.rating_field.each(function(){s.multi_rating[d(this).data("index")]=parseInt(d(this).val())}),s.rating=0):s.rating=s.rating_field.val(),l(a,s,"edit")||((i=new FormData).append("request","submit_edit_review"),i.append("rating",s.rating),i.append("multi_rating",0===Object.keys(s.multi_rating).length?"":JSON.stringify(s.multi_rating)),i.append("title",void 0===s.title.val()?"":s.title.val()),i.append("content",s.content.val()),i.append("attachments",0<s.attachments.length?s.attachments.val():""),i.append("recaptcha_response",s.recaptcha_response),i.append("review_id",e),i.append("box_id",a.element.data("review-box")),i.append("popup",r?"yes":"no"),d.each(u.files,function(e,t){i.append("file-"+e,t)}),p.ajax(i,{block:n,processData:!1,contentType:!1}).done(function(e){var t;!0===e.success?(_(),t=d("<div></div>").html(e.data.html).find(e.data.review_id).html(),a.element.find(e.data.review_id).html(t),m(),d("html, body").animate({scrollTop:a.element.find(e.data.review_id).offset().top-ywar_frontend.scroll_offset},200)):l(a,s,"edit")}))},f=function(a,e,t){var i,n=a.element.find("#yith-ywar-edit-reply-"+e),r=n.closest(".yith-ywar-single-review").hasClass("in-popup"),s={title:n.find('input[name="yith-ywar-title"]'),content:n.find('textarea[name="yith-ywar-content"]'),attachments:n.find('input[name="yith-ywar-attachments"]'),recaptcha_wrapper:n.find(".g-recaptcha"),recaptcha_response:t,user_id:parseInt(ywar_frontend.user_id)};ywar_frontend.use_recaptcha&&"v2"===ywar_frontend.recaptcha_version&&(s.recaptcha_response=grecaptcha.getResponse(p.captcha_edit)),l(a,s,"edit")||((i=new FormData).append("request","submit_edit_reply"),i.append("title",s.title.val()),i.append("content",s.content.val()),i.append("attachments",0<s.attachments.length?s.attachments.val():""),i.append("recaptcha_response",s.recaptcha_response),i.append("review_id",e),i.append("box_id",a.element.data("review-box")),i.append("popup",r?"yes":"no"),d.each(u.files,function(e,t){i.append("file-"+e,t)}),p.ajax(i,{block:n,processData:!1,contentType:!1}).done(function(e){var t;!0===e.success?(_(),t=d("<div></div>").html(e.data.html).find(e.data.review_id).html(),a.element.find(e.data.review_id).html(t),m(),d("html, body").animate({scrollTop:a.element.find(e.data.review_id).offset().top-ywar_frontend.scroll_offset},200)):l(a,s,"edit")}))},w=function(t,a,e,i){var n,r=t.element.find("#yith-ywar-new-reply-"+a),s=r.closest(".yith-ywar-single-review").hasClass("in-popup"),o={user_name:r.find('input[name="yith-ywar-user-name"]'),user_email:r.find('input[name="yith-ywar-user-email"]'),title:r.find('input[name="yith-ywar-title"]'),content:r.find('textarea[name="yith-ywar-content"]'),recaptcha_wrapper:r.find(".g-recaptcha"),recaptcha_response:i,user_id:parseInt(ywar_frontend.user_id)};ywar_frontend.use_recaptcha&&"v2"===ywar_frontend.recaptcha_version&&(o.recaptcha_response=grecaptcha.getResponse(p.captcha_edit)),l(t,o,"insert")||((n=new FormData).append("request","submit_new_reply"),n.append("user_name",o.user_name.val()),n.append("user_email",o.user_email.val()),n.append("user_id",o.user_id),n.append("title",o.title.val()),n.append("content",o.content.val()),n.append("recaptcha_response",o.recaptcha_response),n.append("review_id",a),n.append("in_reply_of",e),n.append("popup",s?"yes":"no"),d.each(u.files,function(e,t){n.append("file-"+e,t)}),p.ajax(n,{block:r,processData:!1,contentType:!1}).done(function(e){!0===e.success?(_(),r.find(".temp-attachment").each(function(){d(this).remove()}),r.find(".attachments-list").addClass("empty"),m(),e.data.message?(r.html(e.data.message),d("html, body").animate({scrollTop:r.offset().top-ywar_frontend.scroll_offset},200)):(t.element.find(".yith-ywar-edit-forms:not(.new-review)").remove(),t.element.find(".replies-review-"+a).append(e.data.html),d("html, body").animate({scrollTop:t.element.find(e.data.review_id).offset().top+t.element.find(e.data.review_id).innerHeight()-400},200))):l(t,o,"insert")}))},_=function(){u={form:"",files:[],type_count:{image:0,video:0}},d(".messages").html("")},t=function(){var e=d(".woocommerce-tabs");d("body").find("li.reviews_tab a").trigger("click"),d("body.theme-porto").find("li.reviews_tab").trigger("click"),0<e.length&&d("html, body").animate({scrollTop:e.offset().top-ywar_frontend.scroll_offset},500),d(document).trigger("yith_ywar_review_tab")},m=function(){if(ywar_frontend.attachments_gallery||ywar_frontend.graph_bars){const a=".yith-ywar-stats-wrapper",i=".yith-ywar-reviews-with-attachments",n=".yith-ywar-tab-title",r=".yith-ywar-product-rating-wrapper";d.ajax({url:window.location.href,success:function(e){var t;""!==e&&(e=d("<div></div>").html(e),0<d(a).length&&(t=e.find(a),d(a).html(t.html())),0<d(n).length&&(t=e.find(n),d(n).html(t.html())),0<d(r).length&&(t=e.find(r),d(r).html(t.html())),0<d(i).length)&&(0<(t=e.find(i)).html().trim().length?d(i).html(t.html()).removeClass("empty-gallery"):d(i).addClass("empty-gallery"),v())}})}},v=function(){new p.Swiper(".preview-gallery",{spaceBetween:10,slidesPerView:"auto",watchSlidesProgress:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},y=function(e){this.element=d(e),this.args={page:1,rating:"all",sorting:"default",helpful:"no"},this.popup=!1,this.wrapper=".yith-ywar-reviews-list",this.init()},g=function(e){this.element=d(e),this.page=1,this.init()},b=function(e,t){this.element=d(e),this.scroll=d("#yith-ywar-filter-popup-wrapper"),this.args={page:1,rating:t.rating,sorting:"default",helpful:"no"},this.popup=!0,this.wrapper=".yith-ywar-reviews-list-popup",this.element.data("product-id",t.product_id),this.element.data("box-id",t.box_id),this.init()},F=function(e,t){this.element=d(e),this.scroll=d("#yith-ywar-attachments-popup-wrapper"),this.slide=t.slide_index,this.review_id=t.review_id,this.parent=t.parent,this.init()},x=function(e,t){this.element=d(e),this.scroll=d("#yith-ywar-gallery-popup-wrapper"),this.slide=t.slide_index,this.review_id=t.review_id,this.parent=t.parent,this.init()},C=function(e,t){this.element=d(e),this.slide=t.slide_index,this.review_id=t.review_id,this.parent=t.parent,this.init()};y.prototype={init:function(){r(this,this.reviews_loaded),this.after_init()},after_init:function(){const t=this;t.element.on("click",".load-more-button",function(){t.args.page=d(this).data("page"),r(t,t.reviews_loaded)}).on("click",".yith-ywar-single-review:not(.in-popup) .single-attachment",function(){var e={review_id:d(this).data("review-id"),slide_index:d(this).data("slide-index"),parent:t.element};d("#yith-ywar-attachments-popup").yith_ywar_attachment_review(e)}).on("click",".yith-ywar-swiper.preview-gallery .swiper-slide",function(){var e={review_id:d(this).data("review-id"),slide_index:d(this).data("slide-index"),parent:t.element};d("#yith-ywar-gallery-popup").yith_ywar_attachment_gallery(e)}).on("click",".rating-group",function(){var e;0!==parseInt(d(this).data("count"))&&(ywar_frontend.filter_dialog?(e={rating:d(this).data("rating"),product_id:t.element.data("product-id"),box_id:t.element.data("review-box")},d("#yith-ywar-filter-popup").yith_ywar_filtered_reviews(e)):(t.element.find(t.wrapper).html(""),t.args.page=1,t.args.rating=d(this).data("rating"),r(t,t.reviews_loaded)))}).on("click",".filter-buttons .show-all-reviews, .filter-buttons .rating-label",function(){t.element.find(t.wrapper).html(""),t.args.page=1,t.args.rating="all",r(t,t.reviews_loaded)}).on("change",".sorting-options",function(){t.element.find(t.wrapper).html(""),t.args.page=1,t.args.sorting=d(this).val(),r(t,t.reviews_loaded)}).on("click",".tab-item",function(){t.element.find(".tab-item").removeClass("selected"),d(this).addClass("selected"),t.args={page:1,rating:"all",sorting:"default",helpful:"helpful"===d(this).data("filter")?"yes":"no"};var e=t.element.find(".sorting-options");0<e.length?e.val("default").trigger("change"):(t.element.find(t.wrapper).html(""),r(t,t.reviews_loaded))}).on("click",".yith-ywar-pending-reviews-list .wrapper-title",function(){d(this).parent().find(".wrapper-content").slideToggle()}),i(t),v()},reviews_loaded:function(e,t){t.element.find(".yith-ywar-filter-data").remove(),t.element.find(".load-more-reviews").remove(),t.element.find(t.wrapper).append(e.data.reviews),e.data.message&&d(e.data.message).insertAfter(".yith-ywar-stats-wrapper"),-1===window.location.hash.indexOf("#review-")&&-1===window.location.hash.indexOf("#comment-")||t.scroll_to_review(window.location.hash.replace("comment","review"))},scroll_to_review:function(e){0<d(e).length&&(d("html, body").animate({scrollTop:d(e).offset().top-ywar_frontend.scroll_offset},200),history.replaceState("",document.title,window.location.pathname))}},g.prototype={init:function(){ywar_frontend.is_block_editor&&this.element.css("min-height","400px"),this.load_reviews(),this.after_init()},load_reviews:function(){const t=this;p.ajax({settings:t.element.data("settings"),request:"load_reviews_shortcode",page:t.page},{block:t.element}).done(function(e){t.element.find(".load-more-reviews-shortcode").remove(),t.element.append(e.data)})},after_init:function(){const e=this;e.element.on("click",".load-more-button-shortcode",function(){e.page=d(this).data("page"),e.load_reviews()}).on("click",".yith-ywar-single-review:not(.in-popup) .single-attachment",function(){var a={review_id:d(this).data("review-id"),slide_index:d(this).data("slide-index"),parent:e.element};p.ajax({request:"load_attachment_popup",review_id:d(this).data("review-id")},{block:e.element}).done(function(e){var t="#yith-ywar-attachments-popup";d(t).remove(),d("body").append(e.data),d(t).yith_ywar_attachment_review(a)})}),i(e)}},b.prototype={init:function(){this.element.find(".filter-options").val(this.args.rating),r(this,this.open_popup),this.after_load()},open_popup:function(e,t){t.init_scrollbar(t.scroll),d("html").addClass("yith-ywar-open-popup"),t.element.removeClass("closed").addClass("visible"),t.element.find(".popup-content").html('<div class="yith-ywar-reviews-list-popup">'+e.data.reviews+"</div>")},init_scrollbar:function(e){new p.SimpleBar(e[0],{forceVisible:!0,autoHide:!1})},after_load_more:function(e,t){(wrapper=t.element.find(t.wrapper)).find(".load-more-reviews-popup").remove(),wrapper.append(e.data.reviews)},after_load:function(){const t=this;t.element.on("click",".load-more-button-popup",function(){t.args.page=d(this).data("page"),r(t,t.after_load_more)}).on("change",".filter-options",function(){t.args.page=1,t.args.rating=d(this).val(),r(t,function(e){t.scroll.scrollTop(0),t.element.find(t.wrapper).html(e.data.reviews)})}).on("click",".popup-close, .popup-close-link",function(e){e.preventDefault(),t.close_popup()}).on("click",".yith-ywar-single-review.in-popup .single-attachment",function(){var e={review_id:d(this).data("review-id"),slide_index:d(this).data("slide-index"),parent:t.element};d("#yith-ywar-gallery-lightbox").yith_ywar_attachment_lightbox(e)}),i(t),d(".filter-options").selectWoo({dropdownCssClass:"yith-ywar-select2-stars",minimumResultsForSearch:Infinity,templateResult:function(e){return e.id?d('<span class="select2-star-rating" title="'+e.id+'">'+e.text+"</span>"):e.text}})},close_popup:function(){this.element.addClass("closed").removeClass("visible"),d("html").removeClass("yith-ywar-open-popup"),d(document).off("click",".load-more-button-popup"),this.scroll.scrollTop(0),0}},F.prototype={init:function(){const t=this;p.ajax({review_id:t.review_id,request:"load_single_review"},{block:t.parent}).done(function(e){t.open_popup(e,t)})},open_popup:function(e,t){t.init_scrollbar(t.scroll),d("html").addClass("yith-ywar-open-popup"),t.element.removeClass("closed").addClass("visible"),t.element.find(".popup-content").html(e.data),t.after_load(t)},init_scrollbar:function(e){new p.SimpleBar(e[0],{forceVisible:!0,autoHide:!1})},after_load:function(t){d(document).on("click",".popup-close, .popup-close-link",function(e){e.preventDefault(),t.close_popup()}),a(t.slide,"gallery")},close_popup:function(){this.element.addClass("closed").removeClass("visible"),d("html").removeClass("yith-ywar-open-popup"),this.scroll.scrollTop(0),this.element.find(".popup-content").html(""),0}},x.prototype={init:function(){const t=this;p.ajax({active_review_id:t.review_id,request:"load_reviews_with_attachments"},{block:t.parent}).done(function(e){t.open_popup(e,t)})},open_popup:function(e,t){t.init_scrollbar(t.scroll),d("html").addClass("yith-ywar-open-popup"),t.element.removeClass("closed").addClass("visible"),t.element.find(".popup-content").html(e.data),t.after_load(t)},init_scrollbar:function(e){new p.SimpleBar(e[0],{forceVisible:!0,autoHide:!1})},after_load:function(t){d(document).on("click",".popup-close, .popup-close-link",function(e){e.preventDefault(),t.close_popup()}),a(t.slide,"gallery")},close_popup:function(){this.element.addClass("closed").removeClass("visible"),d("html").removeClass("yith-ywar-open-popup"),this.scroll.scrollTop(0),this.element.find(".popup-content").html(""),0}},C.prototype={init:function(){const t=this;p.ajax({review_id:t.review_id,request:"load_review_attachments"},{block:t.parent}).done(function(e){t.open_popup(e,t)})},open_popup:function(e,t){t.element.removeClass("closed").addClass("visible"),t.element.find(".lightbox-content").html(e.data),t.after_load(t)},after_load:function(t){d(document).on("click",".lightbox-close, .lightbox-overlay",function(e){e.preventDefault(),t.close_popup()}),a(t.slide,"lightbox")},close_popup:function(){this.element.removeClass("visible").addClass("closed")}},d.fn.yith_ywar_reviews=function(){return this.each(function(){d.data(this,"plugin_yith_ywar_reviews")||d.data(this,"plugin_yith_ywar_reviews",new y(this))})},d.fn.yith_ywar_reviews_shortcode=function(){return this.each(function(){d.data(this,"plugin_yith_ywar_reviews_shortcode")||d.data(this,"plugin_yith_ywar_reviews_shortcode",new g(this))})},d.fn.yith_ywar_filtered_reviews=function(e){d.data(this,"plugin_yith_ywar_filtered_reviews",new b(this,e))},d.fn.yith_ywar_attachment_review=function(e){d.data(this,"plugin_yith_ywar_attachment_review",new F(this,e))},d.fn.yith_ywar_attachment_gallery=function(e){d.data(this,"plugin_yith_ywar_attachment_gallery",new x(this,e))},d.fn.yith_ywar_attachment_lightbox=function(e){d.data(this,"plugin_yith_ywar_attachment_lightbox",new C(this,e))},d("body").on("init",function(){e?console.log("YWAR already loaded"):(e=!0,console.log("YWAR loaded"),"#reviews"===window.location.hash&&t(),d(".yith-ywar-main-wrapper").each(function(){d(this).yith_ywar_reviews()}))}).trigger("init"),d("body:not(.woocommerce)").trigger("init"),d(".yith-ywar-reviews-list-shortcode").each(function(){d(this).yith_ywar_reviews_shortcode()}),d(document).on("click",".yith-ywar-user-reviews-wrapper.in-shortcode .review-pagination",function(e){e.preventDefault();var t=d(".yith-ywar-user-reviews-wrapper");p.ajax({page:d(this).data("page"),request:"load_user_reviews"},{block:t}).done(function(e){!0===e.success&&(t.html(d(e.data).html()),d("html, body").animate({scrollTop:t.offset().top-ywar_frontend.scroll_offset},200))})}).on("click","a.total-reviews",function(e){e.stopPropagation(),e.preventDefault(),t()}),d(".sorting-options").selectWoo({dropdownCssClass:"yith-ywar-select2",minimumResultsForSearch:Infinity})}(jQuery,window.ywar);