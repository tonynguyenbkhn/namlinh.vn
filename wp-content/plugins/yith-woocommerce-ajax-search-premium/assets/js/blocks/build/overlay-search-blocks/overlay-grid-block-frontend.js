"use strict";(self.webpackChunkwebpackYWCASBlocksJsonp=self.webpackChunkwebpackYWCASBlocksJsonp||[]).push([[817],{7242:(e,t,r)=>{r.d(t,{S:()=>i}),r(9196);var a=r(9307),s=r(9818);const o=(0,a.createContext)({isEditor:!1,currentPostId:0,currentView:"",previewData:{},getPreviewData:()=>({})});var c=r(7307),n=r(2991),l=r.n(n);const u={},i=(e={query:"",showCategories:!1,maxResults:5,page:0})=>{const t=(0,a.useRef)({}),{isEditor:r}=(0,a.useContext)(o),{query:n,showCategories:i,maxResults:d,page:m}=e,p=r?"":n,h=(0,s.useSelect)((e=>{const t=`${p}-${m}`;if(!r&&u[t])return{results:u[t],isSearching:!1};{const a=e(c.YWCAS_RESULTS_VIEW_STORE_KEY),s=a.getSearchedResults(p,0,i,d,m,r),o=!a.hasFinishedResolution("getSearchedResults",[p,0,i,d,m,r]),n={results:s,isSearching:o};return o||(u[t]=s),n}}));return t.current&&l()(t.current,h)||(t.current=h),{results:t.current.results,isSearching:t.current.isSearching,getCategories:e=>(0,s.useSelect)((t=>{const r=t(c.YWCAS_RESULTS_VIEW_STORE_KEY);return{categories:r.getCategories(e),isLoading:!r.hasFinishedResolution("getCategories",[e])}}),[e]),getResults:(e=!1,t=0)=>(0,s.useSelect)((r=>{const a=r(c.YWCAS_RESULTS_VIEW_STORE_KEY),s=a.getResults(),o=`${e}-${t}`;return{results:u[o]?u[o]:s,isLoading:""===a.getLastQuery()}}),[e,t])}}},5641:(e,t,r)=>{r.d(t,{aS:()=>c,s3:()=>n}),r(5935);var a=r(9536);r(9196);const s=e=>accounting.formatMoney(e,a.ywcas_wc_data.currency),o=(e,t=0)=>{const r=s(e);return parseFloat(t)&&t!==e?`${s(t)} - ${r}`:r},c=e=>{let t=""!==e.max_price?o(e.max_price):"";return"variable"===e.product_type?t=o(e.max_price,e.min_price):parseInt(e.onsale)&&""!==e.min_price&&(t=o(e.min_price)),t},n=(e,t=3)=>{const r=new Map;for(const t of e)r.has(t)?r.set(t,r.get(t)+1):r.set(t,1);return[...r.entries()].sort(((e,t)=>t[1]-e[1])).slice(0,t).map((e=>e[0]))}},2630:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var a=r(9196),s=r(9307),o=r(5736),c=r(309),n=r(3967),l=r.n(n),u=r(5641),i=r(9536);const d=e=>{const{columns:t,rows:r,showName:s,showImage:n,showPrice:d,showAddToCart:m,products:p,noResultLabel:h,onProductClick:g}=e,w=({imageURL:e,isOnSale:t})=>(0,a.createElement)(c.Box,{className:"wc-block-grid__product-image"},t&&(0,a.createElement)(c.Box,{className:"wc-block-grid__product-onsale"},(0,a.createElement)("span",null,(0,o.__)("Sale!","yith-woocommerce-ajax-search"))),(0,a.createElement)("img",{src:"string"==typeof e?e:i.ywcas_wc_data.placeholderImageSrc,className:"attachment-woocommerce_thumbnail size-woocommerce_thumbnail"})),_=({title:e})=>(0,a.createElement)("h2",{className:"woocommerce-loop-product__title"},e),f=({product:e})=>{const t=(0,u.aS)(e);return(0,a.createElement)(c.Box,{className:"wc-block-grid__product-price price"},(0,a.createElement)("span",{className:"price"},t))},S=({product:e})=>{const t=parseInt(e.instock),r=parseInt(e.is_purchasable),s="wp-element-button wp-block-button__link wp-block-woocommerce-product-button search-result-add-to-cart add_to_cart_button ajax_add_to_cart";let o;const n=`?add-to-cart=${e.post_id}`,l={"data-quantity":1,"data-product_id":e.post_id,"data-product_sku":e.sku};return o=r&&t&&("simple"===e.product_type||"variation"===e.product_type)&&0<parseFloat(null==e?void 0:e.max_price)?(0,a.createElement)("a",{href:n,onClick:t=>((e,t)=>{e.target.classList.contains("search-result-add-to-cart")&&g(e,t,!1)})(t,e),className:s,...l},i.YWCAS_ADD_TO_CART_LABEL):t&&"variable"===e.product_type&&0<parseFloat(null==e?void 0:e.max_price)?(0,a.createElement)("a",{onClick:t=>g(t,e),className:s},i.YWCAS_SELECT_OPTIONS):(0,a.createElement)("a",{onClick:t=>g(t,e),className:s},i.YWCAS_READ_MORE),(0,a.createElement)(c.Box,{className:"wp-block-button wc-block-grid__product-add-to-cart"},o)},b=({product:e})=>{var t;return(0,a.createElement)("li",{className:"wc-block-grid__product",onClick:t=>g(t,e)},(0,a.createElement)("a",{href:e.url,className:"wc-block-grid__product-link"},n&&(0,a.createElement)(w,{imageURL:null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.big,alt:e.name,isOnSale:1==e.onsale}),s&&(0,a.createElement)(_,{title:e.name}),d&&(0,a.createElement)(f,{product:e})),m&&(0,a.createElement)(S,{product:e}))},E=l()("woocommerce","wc-block-grid","ywcas-overlay-grid-block",`has-${t}-columns`,"has-aligned-buttons",r>1?"has-multiple-rows":"");return(0,a.createElement)(c.Box,{className:E},p.length>0?(0,a.createElement)("ul",{className:"wc-block-grid__products"},p.map((e=>(0,a.createElement)(b,{product:e,key:e.id})))):(0,a.createElement)(c.Typography,null,h))};var m=r(3526),p=r(7242),h=r(1454),g=r(6989),w=r.n(g);const _=()=>{const{query:e,page:t}=(0,m.AB)(),{columns:r,rows:o,setTotals:c,showName:n,showImage:l,showPrice:u,showAddToCart:g,noResultLabel:_}=(0,h.b6)(),[f,S]=(0,s.useState)([]),{results:b,isSearching:E}=(0,p.S)({query:e,maxResults:r*o,showCategories:!1,page:t});return(0,s.useEffect)((()=>{const e=null==b?void 0:b.results.map((e=>e));S(e),c(Math.ceil(b.totalResults/(r*o)))}),[b]),E?null:(0,a.createElement)(d,{columns:r,rows:o,products:f,showName:n,showImage:l,showPrice:u,noResultLabel:_,showAddToCart:g,onProductClick:(t,r,a=!0)=>{t.stopPropagation();const s="/ywcas/v1/register?itemID="+r.post_id+"&queryString="+e+"&totalResults="+b.totalResults+"&lang="+i.YWCAS_LANG;w()({path:s}).then((()=>{a&&(window.location.href=r.url)})).catch((e=>{console.log(e)}))}})}},1454:(e,t,r)=>{r.d(t,{b6:()=>n,m$:()=>c});var a=r(9196),s=r(9307);const o=(0,s.createContext)({}),c=({defaultColumns:e,defaultRows:t,defaultShowName:r,defaultShowImage:c,defaultShowPrice:n,defaultShowAddToCart:l,defaultNoResultLabel:u,children:i})=>{const[d,m]=(0,s.useState)(e),[p,h]=(0,s.useState)(t),[g,w]=(0,s.useState)(r),[_,f]=(0,s.useState)(c),[S,b]=(0,s.useState)(n),[E,C]=(0,s.useState)(l),[y,k]=(0,s.useState)([]),[R,v]=(0,s.useState)(0),[A,N]=(0,s.useState)(u);return(0,a.createElement)(o.Provider,{value:{columns:d,setColumns:e=>{m(e)},rows:p,setRows:e=>{h(e)},showName:g,setShowName:e=>{w(e)},showImage:_,setShowImage:e=>{f(e)},showPrice:S,setShowPrice:e=>{b(e)},showAddToCart:E,setShowAddToCart:e=>{C(e)},products:y,setProducts:k,totals:R,setTotals:v,noResultLabel:A,setNoResultLabel:e=>{N(e)}}},i)},n=()=>(0,s.useContext)(o)},2991:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,s,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(s=a;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(s of t.entries())if(!r.has(s[0]))return!1;for(s of t.entries())if(!e(s[1],r.get(s[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(s of t.entries())if(!r.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((a=t.length)!=r.length)return!1;for(s=a;0!=s--;)if(t[s]!==r[s])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=a;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=a;0!=s--;){var c=o[s];if(!e(t[c],r[c]))return!1}return!0}return t!=t&&r!=r}}}]);