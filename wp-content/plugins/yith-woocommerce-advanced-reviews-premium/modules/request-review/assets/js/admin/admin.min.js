!function(a){function l(){a("#bulk-action-selector-top, #bulk-action-selector-bottom").select2({minimumResultsForSearch:Infinity}),a(document.body).trigger("wc-enhanced-select-init"),a(document.body).trigger("yith-framework-enhanced-select-init")}a(document).on("change","#ywar_mail_reschedule-send-immediately",function(){a(this).is(":checked")&&a("#ywar_mail_reschedule-reschedule").prop("checked",!0)}).on("change","#ywar_mail_reschedule-reschedule",function(){a(this).is(":checked")||a("#ywar_mail_reschedule-send-immediately").prop("checked",!1)}).on("change","#ywar_mail_schedule_day, input[name^=ywar_request_type], #ywar_request_criteria, #ywar_request_number",function(){var t=a(".yith-ywar-reschedule-emails");t.hasClass("visible")||t.css("display","flex").hide().addClass("visible").fadeIn()}).on("click",".yith-ywar-bulk-button",function(){var i=a(this).closest(".yith-plugin-fw-list-table-container"),t=a(this).data("action");i.find(".yith-plugin-fw__notice").remove(),yith.ui.confirm({title:ywar_admin.modals[t].title,message:ywar_admin.modals[t].message,confirmButtonType:"delete",confirmButton:ywar_admin.modals[t].button,onConfirm:function(){ywar.adminAjax({request:t},{block:i}).done(function(t){var e=t.data;t.success?a.ajax({url:window.location.href,success:function(t){t=a(t).find(".yith-plugin-fw-list-table-container").html();a(i).html("").html(t).prepend(e),l()}}):a(i).prepend(e)})}})}).on("click",".action__set_cancelled",function(t){t.preventDefault(),t.stopPropagation();var e=a(this).data("id"),i=a(this).closest(".yith-plugin-fw-list-table-container");yith.ui.confirm({title:ywar_admin.modals.set_cancelled.title,message:ywar_admin.modals.set_cancelled.message,confirmButtonType:"delete",confirmButton:ywar_admin.modals.set_cancelled.button,onConfirm:function(){ywar.adminAjax({request:"set_email_cancelled",id:e},{block:i}).done(function(){window.location.reload()})}})}).on("click",".yith-ywar-add-emails",function(){yith.ui.confirm({title:ywar_admin.modals.schedule_new_emails.title,message:ywar_admin.modals.schedule_new_emails.content,confirmButton:ywar_admin.modals.schedule_new_emails.button,width:600,closeAfterConfirm:!1,classes:{wrap:"yith-ywar-list-table-popup",confirm:"yith-plugin-fw__button--xxl"},onCreate:function(){function t(t){var e="date_range_start_date"===t.attr("id")?"minDate":"maxDate",i="#"+("maxDate"==e?"date_range_start_date":"date_range_end_date"),n=t.datepicker("getDate");a(i).datepicker("option",e,n),a(t).trigger("change")}a("input[name^=schedule_request]").on("change",function(){a(this).is(":checked")&&"all"===a(this).val()?a(".yith-plugin-fw-radio__row").find(".yith-plugin-fw-field-wrapper").hide():a(".yith-plugin-fw-radio__row").find(".yith-plugin-fw-field-wrapper").show()}),a.datepicker.setDefaults({onSelect:function(){t(a(this))}}),a(".yith-plugin-fw-datepicker").each(function(){t(a(this))}),a(document).trigger("yith_fields_init")},onConfirm:function(){var n=a(".yith-plugin-fw-list-table-container"),t=a("input[name^=schedule_request]:checked").val(),e=!1,i=!1;"all"!==t&&(e=a("#date_range_start_date").val()||!1,i=a("#date_range_end_date").val()||!1),n.find(".yith-plugin-fw__notice").remove(),ywar.adminAjax({request:"mass_schedule",schedule_type:t,start_date:e,end_date:i},{block:n}).done(function(t){var e,i=t.data;t.success?a.ajax({url:window.location.href,success:function(t){t=a(t).find(".yith-plugin-fw-list-table-container").html();a(n).html("").html(t).prepend(i),a(".yith-plugin-fw-panel-custom-tab-title .yith-plugin-fw__button--primary").addClass("visible"),a(".yith-plugin-fw__confirm__button--cancel").trigger("click"),l()}}):((e=a(".yith-plugin-fw__confirm__content")).find(".yith-plugin-fw__notice").remove(),e.prepend(t.data))})}})}).on("click",".action__delete",function(t){t.preventDefault(),t.stopPropagation();var e=a(this).data("id"),i=a(this).closest(".yith-plugin-fw-list-table-container");yith.ui.confirm({title:ywar_admin.modals.delete_from_blocklist.title,message:ywar_admin.modals.delete_from_blocklist.message,confirmButtonType:"delete",confirmButton:ywar_admin.modals.delete_from_blocklist.button,onConfirm:function(){ywar.adminAjax({request:"delete_from_blocklist",id:e},{block:i}).done(function(){window.location.reload()})}})}).on("click",".yith-ywar-add-to-blocklist",function(){yith.ui.confirm({title:ywar_admin.modals.add_to_blocklist.title,message:ywar_admin.modals.add_to_blocklist.content,confirmButton:ywar_admin.modals.add_to_blocklist.button,closeAfterConfirm:!1,width:450,classes:{wrap:"yith-ywar-list-table-popup",confirm:"yith-plugin-fw__button--xxl"},onConfirm:function(){var n=a(".yith-plugin-fw-list-table-container"),t=a(".yith-plugin-fw-text-field-wrapper"),e=a("#add_to_blocklist").val();if(n.find(".yith-plugin-fw__notice").remove(),t.find(".yith-ywar-mail-error").remove(),!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))throw t.append('<div class="yith-ywar-mail-error">'+ywar_admin.messages.test_mail_wrong+"</div>"),new ywar.Error(ywar_admin.messages.test_mail_wrong);t.find(".yith-ywar-mail-error").remove(),ywar.adminAjax({request:"add_to_blocklist",email:e},{block:n}).done(function(t){var e,i=t.data;t.success?a.ajax({url:window.location.href,success:function(t){t=a(t).find(".yith-plugin-fw-list-table-container").html();a(n).html("").html(t).prepend(i),a(".yith-plugin-fw-panel-custom-tab-title .yith-plugin-fw__button--primary").addClass("visible"),a(".yith-plugin-fw__confirm__button--cancel").trigger("click"),l()}}):((e=a(".yith-plugin-fw__confirm__content")).find(".yith-plugin-fw__notice").remove(),e.prepend(t.data))})}})}).trigger("yith-plugin-fw-tips-init")}(jQuery);