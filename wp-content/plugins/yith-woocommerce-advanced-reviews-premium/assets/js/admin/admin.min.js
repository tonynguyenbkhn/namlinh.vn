!function(r){"undefined"!=typeof adminpage&&0<=["post-php","post-new-php"].indexOf(adminpage)&&(e={dom:{actions:r("#yith-ywar-post-type__actions"),save:r("#yith-ywar-post-type__save"),floatSave:r("#yith-ywar-post-type__float-save")},init:function(){var i=e;i.dom.save.length&&(i.dom.save.on("click",i.onSaveClick),i.dom.floatSave.on("click",i.onFloatSaveClick),document.addEventListener("scroll",i.handleFloatSaveVisibility,{passive:!0}),r(window).on("resize",i.handleFloatSaveVisibility),i.handleFloatSaveVisibility())},isInViewport:function(i){var i=i.get(0).getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return 0<=i.top&&0<=i.left&&i.top<=t&&i.left<=e},handleFloatSaveVisibility:function(){e.isInViewport(e.dom.save)?e.dom.floatSave.removeClass("visible"):e.dom.floatSave.addClass("visible")},onSaveClick:function(i){var e={is_valid:!0};if(r(document).trigger("yith_ywar_post_validation",[e]),r(".yith-plugin-fw-field-wrapper").removeClass("is_required").find("span.warning").remove(),e.is_valid)r(window).off("beforeunload.edit-post"),r(this).block({message:null,overlayCSS:{background:"transparent",opacity:.6}});else{for(var t=e.failed.length,a=0;a<t;a++)e.failed[a].closest(".yith-plugin-fw-field-wrapper").addClass("is_required").append('<span class="warning">'+ywar_admin.messages.required_field+"</span>");i.preventDefault()}},onFloatSaveClick:function(){e.dom.save.trigger("click")}}).init();var e,s={clean:function(i){return i=i.replace(/\s*,\s*/g,",").replace(/,+/g,",").replace(/[,\s]+$/,"").replace(/^[,\s]+/,"")},parseTags:function(i){var e=i.id.split("-check-num-")[1],i=r(i).closest(".yith-ywar-analytics-terms-div"),t=i.find(".yith-ywar-analytics-terms-values"),a=t.val().split(","),n=[];return delete a[e],r.each(a,function(i,e){e&&(e=e.trim(),n.push(e))}),t.val(this.clean(n.join(","))),this.quickClicks(i),!1},quickClicks:function(i){var e=r(".yith-ywar-analytics-terms-values",i),a=r(".yith-ywar-analytics-terms-value-list ul",i),n=r(i).attr("id");e.length&&(i=e.val().split(","),a.empty(),r.each(i,function(i,e){var t;e&&(e=e.trim(),t=r('<li class="select2-selection__choice" />'),(i=r('<span id="'+n+"-check-num-"+i+'" class="select2-selection__choice__remove" tabindex="0"></span>')).on("click keypress",function(i){"click"!==i.type&&13!==i.keyCode||(13===i.keyCode&&r(this).closest(".yith-ywar-analytics-terms-div").find("input.yith-ywar-analytics-terms-insert").focus(),s.parseTags(this))}),t.prepend(e).prepend(i),a.append(t))}))},flushTags:function(i,e,t){var a,n,s=r(".yith-ywar-analytics-terms-values",i),l=r("input.yith-ywar-analytics-terms-insert",i),o=(e=e||!1)?r(e).text():l.val();return void 0!==o&&(n=(n=s.val())?n+","+o:o,n=this.clean(n),o=n.split(","),a=[],r.each(o,function(i,e){(e=e.trim())&&-1===r.inArray(e,a)&&a.push(e)}),n=a.join(","),s.val(n),this.quickClicks(i),e||l.val(""),void 0===t)&&l.focus(),!1},init:function(){var i=r(".yith-ywar-analytics-terms-ajax");r(".yith-ywar-analytics-terms-div").each(function(){s.quickClicks(this)}),r("input.yith-ywar-analytics-terms-insert",i).on("keyup",function(i){if(13===i.which)return s.flushTags(r(this).closest(".yith-ywar-analytics-terms-div")),!1}).on("keypress",function(i){if(13===i.which)return i.preventDefault(),!1})}};s.init(),r("#bulk-action-selector-top, #bulk-action-selector-bottom").select2({minimumResultsForSearch:Infinity})}(jQuery);